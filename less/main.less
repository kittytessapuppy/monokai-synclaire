// variables

@background: #272822;
@base: #49483E;
@primary: #F8F8F0;
@brand: #F92672;
@highlight: #FD971F;

@base_px: 16;
@toRems: (1 / @base_px) + 0rem;
@toEms: (1 / @base_px) + 0em;

@default_padding: 0;
@default_width: 1920 * @toRems;
@default_colspan: 1;
@default_total-cols: 4;
@default_row-margin: 0 auto;
@default_gutter: 0;
@default_margin-top: 0;
@default_margin-bottom: 0;

// mixins
.Row ( @width : @default_width; @padding: @default_padding; @margin : @default_row-margin ) {
  max-width: @width;
  width: 100%;
  margin: @margin;
  padding: @padding;
  &:before,
  &:after {
    content: "";
    display: table;
  }
  &:after {
    clear: both;
  }
}

* {
  box-sizing: border-box;
}

.Cols ( @colspan : @default_colspan; @total_cols : @default_total-cols; @padding: @default_padding; @gutter: @default_gutter; @edge: false; @margin-top : @default_margin-top; @margin-bottom : @default_margin-bottom; ) {
  @total_gutter: (@total_cols - 1) * @gutter;
  @spanned_gutters: (@colspan - 1) * @gutter;
  width: ( @colspan * ((100 - @total_gutter) / @total_cols) ) + @spanned_gutters + 0%;
  float: left;
  padding: @padding;
  .IfEdge (@edge; @gutter; @margin-top; @margin-bottom; );
}

.IfEdge ( @edge; @gutter; @margin-top; @margin-bottom; ) when (@edge = false) {
  margin: @margin-top @gutter + 0% @margin-bottom 0;
}

.IfEdge ( @edge; @gutter; @margin-top; @margin-bottom; ) when (@edge = true) {
  margin: @margin-top 0 @margin-bottom 0;
}

header,
footer {
  .Row (
    @padding: 20 * @toRems;
    @margin: .5 * @toRems auto;
  );
  background-color: @background;
  min-height: 200 * @toRems;
}

main {
  .Row;
  min-height: 500 * @toRems;
}

article {
  .Cols(
    @colspan: 3;
    @padding: 10 * @toRems 20 * @toRems;
    @gutter: 1;
    @margin-top: 20 * @toRems;
    @margin-bottom: 30 * @toRems;
  );
  min-height: 500 * @toRems;
  background-color: @base;
}

aside {
  .Cols(
    @colspan: 1;
    @padding: 10 * @toRems 20 * @toRems;
    @gutter: 1;
    @edge: true;
    @margin-top: 20 * @toRems;
    @margin-bottom: 30 * @toRems;
  );
  min-height: 500 * @toRems;
  background-color: darken(@base, 5%);
}